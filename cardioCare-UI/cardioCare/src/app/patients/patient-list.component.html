<div class="medical-container">

  <div class="header-card">
    <i class="fas fa-user-injured header-icon"></i>
    <div>
      <h2>Pacientes</h2>
      <small style="opacity: 0.8">Gestión de lista de espera y fichas clínicas</small>
    </div>
  </div>

  <div class="table-card">

    <table class="med-table">
      <thead>
      <tr>
        <th>Paciente</th>
        <th>Edad</th>
        <th>Estado / Prioridad</th>
        <th style="text-align: right;">Acciones</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let p of patients">
        <td>
          <div class="patient-name">{{ p.nombre }} {{ p.apellido }}</div>
          <span class="rut-text"><i class="far fa-id-card"></i> {{ p.rut }}</span>
        </td>

        <td>{{ p.edad }} años</td>

        <td>
            <span class="badge"
                  [ngClass]="{
                    'badge-alta': p.prioridad === 'Alta',
                    'badge-media': p.prioridad === 'Media',
                    'badge-baja': p.prioridad === 'Baja'
                  }">
              {{ p.prioridad }}
            </span>
        </td>

        <td style="text-align: right;">
          <a [routerLink]="['/patients', p.id]" class="btn-action">
            Ver Ficha <i class="fas fa-chevron-right" style="font-size: 0.8rem;"></i>
          </a>
        </td>
      </tr>
      </tbody>
    </table>

    <div class="pagination-area">
      <button
        class="page-btn"
        (click)="cambiarPagina(-1)"
        [disabled]="currentPage === 0">
        <i class="fas fa-arrow-left"></i> Anterior
      </button>

      <span class="page-info">
        Página <strong>{{ currentPage + 1 }}</strong> de <strong>{{ totalPages }}</strong>
        <span style="margin-left: 10px; color: #ccc;">|</span>
        <span style="margin-left: 10px;">Total: {{ totalElements }} registros</span>
      </span>

      <button
        class="page-btn"
        (click)="cambiarPagina(1)"
        [disabled]="currentPage === totalPages - 1">
        Siguiente <i class="fas fa-arrow-right"></i>
      </button>
    </div>

  </div>
</div>
